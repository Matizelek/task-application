# Task Application

## General info
This project is a simple way to find the best matching character string in input to have as low as possible typos from pattern.

## Technologies

* Java version: 17
* Spring boot version: 3.2.0

## Setup
Firstly, in main directory, we use terminal to build target generated by maven:
~~~
mvn clean install
~~~

Secondly, in the same directory, we use command to build docker container from generated jar:
~~~
docker compose up -d task-application
~~~
After docker build and run container, we just need a few seconds and Spring should be up and ready.
You can perform health check on this endpoint "http://localhost:8080/actuator/health" and status should be up.

In addition, in application.properties we can change:
* async.executor.corePoolSize - minimum number of threads to keep alive
* async.executor.maxPoolSize - maximum number of threads running concurrently 
* async.executor.queueCapacity - capacity of threads queue waiting for pool to have free space
* task.processing.threadSleep - milliseconds that thread will sleep, during task process

### API

#### It implements three methods

1) Create Task 
2) Get all Tasks
3) Get Task by id

#### Create Task
It uses POST Http method with endpoint "http://localhost:8080/task" and it requires two parameters input and pattern.
When perform successfully, it returns Http code 200 with taskId, input and pattern.
In case of empty input or pattern, or when the task is duplicated, based on identical input and pattern the method will return 406 Http Error code, as Not Acceptable.

E.g. successful response:
```
 {
 "taskId": 1,
 "input": "ABCD",
 "pattern": "BCD"
 }
```

#### Get all Tasks
It uses GET Http method with endpoint "http://localhost:8080/task/all" and none additional parameters required.
When perform successfully, it returns Http code 200 with list of Tasks with taskId, input and pattern of listed task.
That method also returns Http code 200, when list of tasks is empty with empty list.

E.g. successful response:

```
 [
    {
    "taskId": 1,
    "input": "ABCD",
    "pattern": "BCD"
    },
    {
    "taskId": 2,
    "input": "ABCD",
    "pattern": "BWD"
    }
 ]
```

#### Get Task by id
It uses GET Http method with endpoint "http://localhost:8080/task" and it requires one parameter id of a task, that we want to be received.
When perform successfully, it returns Http code 200 with detailed info about such Tasks with id, input, pattern, position, typos progress and taskResult.
In case that we want to get task which does not exist, this method will return Http error code 404 as Not Found.

Meaning of detailed info parameters:
* id - task identification
* input - variable using during task creation 
* pattern - variable using during task creation 
* position - can be null, have information about the best match position of pattern in input
* typos - can be null, have information about how many typos are in best match position of pattern in input
* progress - the range of this value is 0%-100%, inform about current status of processing task, when value reaches 100% the process is end.  
* taskResult - can have 3 possible values: NEW, FAILED, SUCCESS. 
NEW means that the task is new and has not passed the process yet. 
FAILED means that it passes the process, but no match is found. 
SUCCESS means that it passes the process and finds the best match position.


E.g. successful response:

```
 {
 "id": 1,
 "input": "ABCD",
 "pattern": "BCD",
 "position": 1,
 "typos": 0,
 "progress": "100%",
 "taskResult": "SUCCESS"
 }
```
